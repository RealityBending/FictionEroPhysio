// Questionnaires
const questionnaires_instructions = {
    type: jsPsychHtmlButtonResponse,
    stimulus:
        "<h2>Questionnaires</h2>" +
        // rephrase if needed
        "<p>We will continue with a series of questionnaires.<br>It is important that you answer truthfully. Please read the statements carefully and answer according to what describe you the best.</p>",
    choices: ["Continue"],
    data: { screen: "part2_instructions" },
}

// Convernience function to shuffle an object (used internally)
function shuffleObject(obj) {
    const entries = Object.entries(obj)
    for (let i = entries.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1))
            ;[entries[i], entries[j]] = [entries[j], entries[i]]
    }
    return Object.fromEntries(entries)
}

// BAIT  ===============================================================================
/* Attitudes towards AI *==========================*/
// Beliefs about Artificial Images Technology (BAIT)
// History:
// - 1.0: BAIT-Original: Items specifically about CGI and artificial media originally in Makowski 2025 (FakeFace)
// - 2.0: BAIT-14: Validated in FictionEro (with new items + removal of "I think"), where it was mixed with the 6 most
//   loading items of the positive and negative attitutes dimensions from the General Attitudes towards
//   Artificial Intelligence Scale (GAAIS; Schepman et al., 2020, 2022)
// - BAIT-14: Used in FakeNewsValidation
// - 2.1: BAIT-12: Used in FakeFace2.
//   - Removed 2 GAAIS items (GAAIS_Negative_9, GAAIS_Positive_7)
//   - Replaced "Artificial Intelligence" with "AI
//   - Change display (Analog scale -> Likert scale)
// - 2.1: BAIT-12: Used in FictionEro2

const bait_items = {
    //Expectations
    BAIT_ImagesRealistic: "Current AI algorithms can generate very realistic images",
    BAIT_ImagesIssues: "Images of faces or people generated by AI always contain errors and artifacts",
    BAIT_VideosIssues: "Videos generated by AI have obvious problems that make them easy to spot as fake",
    BAIT_VideosRealistic: "Current AI algorithms can generate very realistic videos",
    BAIT_ImitatingReality: "Computer-Generated Images (CGI) are capable of perfectly imitating reality",
    BAIT_EnvironmentReal: "Technology allows the creation of environments that seem just as real as reality",
    BAIT_TextRealistic: "AI assistants can write texts that are indistinguishable from those written by humans",
    BAIT_TextIssues: "Documents and paragraphs written by AI usually read differently compared to Human productions",
    // Attitudes
    BAIT_Dangerous: "AI is dangerous",
    BAIT_Worry: "I am worried about future uses of AI",
    BAIT_Exciting: "AI is exciting",
    BAIT_Benefit: "Much of society will benefit from a future full of AI",
    // Expertise
    BAIT_ExpertAI: "I consider myself an expert in AI technology",
    BAIT_UnderstandingAI: "I have a good understanding of how AI works",
    BAIT_UserAI: "I use AI technology on a regular basis",
    // Discrimination
    BAIT_ImageDistinctionEasy: "I can easily distinguish between real and AI-generated images",
    BAIT_ImageDistinctionBad: "I am bad at telling if images are real or AI-generated",
    BAIT_TextDifferentiation: "I often find it challenging to differentiate between AI-generated and human-written text",
    BAIT_ContentDetection: "I can accurately detect subtle differences between AI from human-created content",
    // Bias
    BAIT_UniqueHuman: "Human creators bring a unique perspective that AI cannot replicate",
    BAIT_InnovativeAI: "AI-generated media can sometimes surpass human creativity in terms of innovation",
    BAIT_ImpersonalAI: "AI-generated content often feels impersonal compared to human-generated media",
    BAIT_InterestingAI: "AI-generated content tends to be more interesting and engaging than human-generated content",
    BAIT_EmotionalHuman: "Human-generated art evokes stronger emotional responses than AI-generated art",
    BAIT_PreferenceHuman: "I am more likely to appreciate content when I know it is created by humans rather than AI",
    BAIT_TrustHuman: "I am more likely to trust content when I know it is created by a human rather than AI",
}

// This function formats each question into a jsPsych-survey question that contains information about the question format
function bait_questions(items, required = true, ticks = ["Disagree", "Agree"]) {
    // In Schepman et al. (2022) they removed 'Strongly'
    items = shuffleObject(items)

    //Make questions
    questions = []
    for (const key of Object.keys(items)) {
        q = {
            title: items[key],
            name: key,
            type: "rating",
            displayMode: "buttons",
            isRequired: required,
            minRateDescription: ticks[0],
            maxRateDescription: ticks[1],
            rateValues: [0, 1, 2, 3, 4, 5, 6],
        }
        questions.push(q)
    }
    return [
        {
            elements: questions,
            description:
                "We are interested in your thoughts about Artificial Intelligence (AI) as it exists today (not its potential in the future). Please read the statements below carefully and indicate the extent to which you agree with each statement.",
        },
    ]
}

// Questionnaire 
const questionnaire_bait = {
    type: jsPsychSurvey,
    survey_json: {
        title: "Artificial Intelligence",
        // description: "",
        showQuestionNumbers: false,
        goNextPageAutomatic: true,
        // showProgressBar: "aboveHeader",
        pages: bait_questions(bait_items),
    },
    data: {
        screen: "questionnaire_bait",
    },
}

// BAIT FEEDBACK?? 


// COPS ===========================================================================
// Hatch, S. G., Esplin, C. R., Hatch, H. D., Halstead, A., Olsen, J., & Braithwaite, S. R. (2023). The consumption of pornography scale–general (COPS–G). Sexual and Relationship Therapy, 38(2), 194-218.
const questionnaire_cops = {
    type: jsPsychSurvey,
    survey_json: {
        title: "Sexual Activity",
        completeText: "Continue",
        showQuestionNumbers: false,

        elements: [
            {
                type: "radiogroup",
                name: "COPS_Frequency",
                title: "Porn Frequency",
                description: "How often have you viewed pornography",
                choices: [
                    "I haven't watched pornography in the past 30 days",
                    "I watched pornography once in the past 30 days",
                    "I watched pornography twice in the past 30 days",
                    "I watched pornography weekly",
                    "I watched pornography multiple times a week",
                    "I watched pornography daily",
                    "I watched pornography multiple times a day",
                ],
                required: true,
            },
            {
                type: "radiogroup",
                name: "COPS_SexualActivity",
                title: "Sexual Activity",
                description: "When was the last time you engaged in any kind of sexual activity (intercourse or masturbation)?",
                choices: [
                    "Less than 24h ago",
                    "Within the last 3 days",
                    "Within the last week",
                    "Within the last month",
                    "Within the last year",
                    "More than a year ago",
                ],
                required: true,
            },
        ],
    },
    data: {
        screen: "questionnaire_cops",
    },
}

// MINT ===================================================================================================
// --> CHANGE ITEMS TO THE FINAL VERSION OF THE MINT
// We dropped the following dimensions:
// - Awareness_SexA: too high level and abstract ("in my body") compared to other items
// - Sensitivity_Sign: Potentially ambiguous phrasing of "something important"
// - Sensitivity_SexC: Less consistent with the other dimensions of Sensitivity that are about different modalities
const items_mint = {
    MINT_Deficit_Urin_1:
        "I sometimes feel like I need to urinate or defecate but when I go to the bathroom I produce less than I expected",
    MINT_Deficit_Urin_2:
        "I often feel the need to urinate even when my bladder is not full",
    MINT_Deficit_Urin_3:
        "Sometimes I am not sure whether I need to go to the toilet or not (to urinate or defecate)",
    MINT_Deficit_CaCo_4:
        "Sometimes my breathing becomes erratic or shallow and I often don't know why",
    MINT_Deficit_CaCo_5:
        "I often feel like I can't get enough oxygen by breathing normally",
    MINT_Deficit_CaCo_6:
        "Sometimes my heart starts racing and I often don't know why",
    MINT_Deficit_CaNo_7:
        "I often only notice how I am breathing when it becomes loud",
    MINT_Deficit_CaNo_8:
        "I only notice my heart when it is thumping in my chest",
    MINT_Deficit_CaNo_9:
        "I often only notice how I am breathing when my breathing becomes shallow or irregular",
    MINT_Deficit_Olfa_10: "I often check the smell of my armpits",
    MINT_Deficit_Olfa_11: "I often check the smell of my own breath",
    MINT_Deficit_Olfa_12: "I often check the smell of my farts",
    MINT_Deficit_Sati_13:
        "I don't always feel the need to eat until I am really hungry",
    MINT_Deficit_Sati_14:
        "Sometimes I don't realise I was hungry until I ate something",
    MINT_Deficit_Sati_15:
        "I don't always feel the need to drink until I am really thirsty",
    // MINT_Awareness_SexA_16: "I always feel in my body if I am sexually aroused",
    // MINT_Awareness_SexA_17: "I can always tell that I am sexually aroused from the way I feel inside",
    // MINT_Awareness_SexA_18: "I always know when I am sexually aroused",
    MINT_Awareness_SexS_19:
        "During sex or masturbation, I often feel very strong sensations coming from my genital areas",
    MINT_Awareness_SexS_20:
        "When I am sexually aroused, I often notice specific sensations in my genital area (e.g., tingling, warmth, wetness, stiffness, pulsations)",
    MINT_Awareness_SexS_21:
        "My genital organs are very sensitive to pleasant stimulations",
    MINT_Awareness_SexO_22:
        "In general, I am very sensitive to changes in my genital organs",
    MINT_Awareness_SexO_23:
        "I can notice even very subtle changes in the state of my genital organs",
    MINT_Awareness_SexO_24:
        "I am always very aware of the state of my genital organs, even when I am calm",
    MINT_Awareness_UrSe_25:
        "In general, I am very aware of the sensations that are happening when I am urinating",
    MINT_Awareness_UrSe_26:
        "In general, I am very aware of the sensations that are happening when I am defecating",
    MINT_Awareness_UrSe_27:
        "I often experience a pleasant sensation when relieving myself when urinating or defecating)",
    MINT_Awareness_RelA_28: "I always know when I am relaxed",
    MINT_Awareness_RelA_29: "I always feel in my body if I am relaxed",
    MINT_Awareness_RelA_30:
        "My body is always in the same specific state when I am relaxed",
    MINT_Awareness_StaS_31:
        "Being relaxed is a very different bodily feeling compared to other states (e.g., feeling anxious, sexually aroused or after exercise)",
    MINT_Awareness_StaS_32:
        "Being sexually aroused is a very different bodily feeling compared to other states (e.g., feeling anxious, relaxed, or after physical exercise)",
    MINT_Awareness_StaS_33:
        "Being anxious is a very different bodily feeling compared to other states (e.g., feeling sexually aroused, relaxed or after exercise)",
    MINT_Awareness_ExAc_34:
        "I can always accurately feel when I am about to burp",
    MINT_Awareness_ExAc_35:
        "I can always accurately feel when I am about to fart",
    MINT_Awareness_ExAc_36:
        "I can always accurately feel when I am about to sneeze",
    MINT_Sensitivity_Card_37:
        "In general, I am very sensitive to changes in my heart rate",
    MINT_Sensitivity_Card_38:
        "I can notice even very subtle changes in the way my heart beats",
    MINT_Sensitivity_Card_39: "I often notice changes in my heart rate",
    MINT_Sensitivity_Resp_40:
        "I can notice even very subtle changes in my breathing",
    MINT_Sensitivity_Resp_41:
        "I am always very aware of how I am breathing, even when I am calm",
    MINT_Sensitivity_Resp_42:
        "In general, I am very sensitive to changes in my breathing",
    // MINT_Sensitivity_Sign_43: "When something important is happening in my life, I can feel immediately feel changes in my heart rate",
    // MINT_Sensitivity_Sign_44: "When something important is happening in my life, I can immediately feel changes in my breathing",
    // MINT_Sensitivity_Sign_45: "When something important is happening in my life, I can feel it in my body",
    MINT_Sensitivity_Gast_46:
        "I can notice even very subtle changes in what my stomach is doing",
    MINT_Sensitivity_Gast_47:
        "In general, I am very sensitive to what my stomach is doing",
    MINT_Sensitivity_Gast_48:
        "I am always very aware of what my stomach is doing, even when I am calm",
    MINT_Sensitivity_Derm_49: "In general, my skin is very sensitive",
    MINT_Sensitivity_Derm_50:
        "My skin is susceptible to itchy fabrics and materials",
    MINT_Sensitivity_Derm_51:
        "I can notice even very subtle stimulations to my skin (e.g., very light touches)",
    // MINT_Sensitivity_SexC_52: "When I am sexually aroused, I often feel changes in the way my heart beats (e.g., faster or stronger)",
    // MINT_Sensitivity_SexC_53: "When I am sexually aroused, I often feel changes in my breathing (e.g., faster, shallower, or less regular)",
    // MINT_Sensitivity_SexC_54: "When I am sexually aroused, I often feel changes in my temperature (e.g., feeling warm or cold)",
    MINT_AttentionCheck_1:
        "I can always accurately answer to the extreme left on this question to show that I am reading it",
}

// This function formats each question into a jsPsych-survey question that contains information about the question format
function make_mint(items, required = true, ticks = ["Disagree", "Agree"]) {
    items = shuffleObject(items)

    questions = []

    // Make questions
    for (const key of Object.keys(items)) {
        q = {
            title: items[key],
            name: key,
            type: "rating",
            displayMode: "buttons",
            // scaleColorMode: "colored",
            isRequired: required,
            minRateDescription: ticks[0],
            maxRateDescription: ticks[1],
            rateValues: [0, 1, 2, 3, 4, 5, 6],
        }
        questions.push(q)
    }

    return { elements: questions }
}

// Questionnaire ================================================
const questionnaire_mint = {
    type: jsPsychSurvey,
    survey_json: function () {
        return {
            title: "About you and your body",
            description:
                "Please answer the following questions based on how accurately each statement describes you in general.",
            showQuestionNumbers: false,
            goNextPageAutomatic: true,
            pages: make_mint(items_mint),
        }
    },
    data: {
        screen: "questionnaire_mint",
    },
}



